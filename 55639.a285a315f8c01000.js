"use strict";(self.webpackChunkoracle=self.webpackChunkoracle||[]).push([[55639],{55639:(_,c,s)=>{s.r(c),s.d(c,{rux_track:()=>b});var i=s(54452),n=s(7515),u=s(2628);s(49096),s(61906);const b=(()=>{let l=class{constructor(t){(0,i.r)(this,t),this.hasRuler=!1,this.width=0,this.columns=0,this.interval=void 0,this.start="",this.end="",this.timezone="UTC",this.playhead=void 0}handleUpdate(t,e){e&&this.initializeRows()}handlePlayheadChange(){this.initializeRows()}handleTimezoneUpdate(){this.initializeRows()}handleTimeRegionChange(t){this.initializeRows(),t.stopPropagation()}connectedCallback(){this._handleSlotChange=this._handleSlotChange.bind(this)}_calculateGridColumnFromTime(t){if(this.start){let e=(0,n.g)(this.start,this.end,this.interval);if("hour"===this.interval)return Math.abs((0,n.b)(e.timelineStart,new Date(t)))+2;if("minute"===this.interval)return Math.abs(function g(l,t){(0,u.r)(2,arguments);var e=(0,n.i)(l,t)/1e3;return e>0?Math.floor(e):Math.ceil(e)}(e.timelineStart,new Date(t)))+2;if("day"===this.interval)return Math.abs((0,n.c)(e.timelineStart,new Date(t)))+2;if("week"===this.interval){const a=new Date(t),d=Math.ceil(Math.abs(function p(l,t){(0,u.r)(2,arguments);var e=(0,n.j)(l,t)/7;return e>0?Math.floor(e):Math.ceil(e)}(e.timelineStart,(0,n.k)(a,0)))),o=e.timelineStart.getDay();let r=a.getDay();return o>r&&(r+=7),Math.ceil(24*(d+(r-o)/7))+2}if("month"===this.interval){const a=new Date(t),d=Math.abs((0,n.f)(e.timelineStart,a)),o=a.getDate()-1,r=(0,n.h)(a),h=a.getHours();return Math.ceil(24*(d+(o+h/24)/r))+2}}return 0}_validateTimeRegion(t,e){return t?e?new Date(t)>new Date(e)?{success:!1,error:`The Time Region start date must be before the end date: ${t} - ${e}`}:new Date(t)>new Date(this.end)?{success:!1,error:`The Time Region start date does not fall within the Timeline's range: ${t} - ${this.start}/${this.end}`}:new Date(t)<new Date(this.start)&&new Date(e)<new Date(this.start)?{success:!1,error:`The Time Region start and end dates do not fall within the Timeline's range: ${t} - ${e}`}:{success:!0}:{success:!1,error:"Time Region must have a end date provided"}:{success:!1,error:"Time Region must have a start date provided"}}initializeRows(){this.playhead&&(this.playedIndicator.style.gridColumnEnd=this._calculateGridColumnFromTime(this.playhead).toString());const t=[...this.el.children].filter(a=>"rux-time-region"===a.tagName.toLowerCase());let e=(0,n.g)(this.start,this.end,this.interval);t.forEach(a=>{const d="hidden"===a.style.visibility,o=this._validateTimeRegion(a.start,a.end);let r=a.start,h=a.end,f=new Date(a.start),m=new Date(a.end);if(o.success){f<e.timelineStart&&m>e.timelineEnd?(a.partial="ongoing",r=e.timelineStart.toISOString(),h=e.timelineEnd.toISOString()):f<e.timelineStart?(a.partial="start",r=this.start):m>e.timelineEnd?(a.partial="end",h=e.timelineEnd.toISOString()):a.partial="none",a.timezone=this.timezone,a.style.gridRow="1",a.style.display="block";const v=`${this._calculateGridColumnFromTime(r)} / ${this._calculateGridColumnFromTime(h)}`;a.style.gridColumn=v}else d||(a.style.display="none")})}_handleSlotChange(){this.initializeRows();const t=[...this.el.children].find(e=>"rux-ruler"===e.tagName.toLowerCase());this.hasRuler=!!t}render(){return(0,i.h)(i.H,null,(0,i.h)("div",{class:"rux-timeline rux-track",style:{gridTemplateColumns:`[header] 200px repeat(${this.columns}, ${this.width}px)`},part:"container"},(0,i.h)("div",{class:"rux-track__header",part:"track-header",style:{gridRow:"1"}},(0,i.h)("slot",{name:"label"})),(0,i.h)("slot",{onSlotchange:this._handleSlotChange}),(0,i.h)("div",{class:{"rux-track__played":this.playhead,hidden:this.hasRuler},ref:t=>this.playedIndicator=t})))}get el(){return(0,i.g)(this)}static get watchers(){return{start:["handleUpdate"],end:["handleUpdate"],interval:["handleUpdate"],playhead:["handlePlayheadChange"],timezone:["handleTimezoneUpdate"]}}};return l.style=".rux-track{background:var(--color-background-surface-default, #1b2d3e);width:fit-content;border-bottom:2px solid var(--color-background-base-default, #101923)}.rux-track__header{box-sizing:border-box;padding:11px 8px 13px 8px;background:var(--color-background-surface-default, #1b2d3e);border-right:2px solid var(--color-background-base-default, #101923);display:flex;align-items:center;font-family:var(--font-body-1-font-family, 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif);font-size:var(--font-body-1-font-size, 1rem);font-weight:var(--font-body-1-font-weight, 400);letter-spacing:var(--font-body-1-letter-spacing, 0.005em);position:sticky;left:0;min-width:184px;z-index:2}.rux-timeline{scrollbar-color:var(--color-border-interactive-muted, #2b659b);position:relative;display:grid;grid-template-rows:auto;background:var(--color-background-surface-default, #1b2d3e)}.rux-track__played{grid-row-start:1;grid-column-start:2;grid-row-end:auto;background:var(--color-background-surface-selected, #1c3f5e)}.hidden{display:none}",l})()}}]);